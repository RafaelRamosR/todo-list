"use strict";var form=document.getElementById("form"),divTask=document.querySelector(".viewTask"),fragment=document.createDocumentFragment(),countDownDate=function(e){var t=new Date(e).getTime(),a=document.querySelectorAll(".task-date");a&&a.forEach((function(e){var a=document.createElement("ul");a.classList.add("task-date-content");setInterval((function(){var e=(new Date).getTime(),n=t-e,r=Math.floor(n/864e5),s=Math.floor(n%864e5/36e5),i=Math.floor(n%36e5/6e4),l=Math.floor(n%6e4/1e3);a.innerHTML='\n          <li class="task-date-items"><span class="up-clock">'.concat(r,'</span>DÃ­as</li>\n          <li class="task-date-items"><span class="up-clock">').concat(s,'</span>Horas</li>\n          <li class="task-date-items"><span class="up-clock">').concat(i,'</span>Minutos</li>\n          <li class="task-date-items"><span class="up-clock">').concat(l,"</span>Segundo</li>\n        "),n<0&&(a.innerHTML='\n            <p class="finish">TAREA FINALIZADA</p>\n          ')}),1);1===e.childNodes.length&&(fragment.appendChild(a),e.appendChild(fragment))}))};document.getElementById("deleteAll").addEventListener("click",(function(){divTask.textContent="",localStorage.clear()}));var deleteStorage=function(e,t){t.remove(),localStorage.removeItem(e)},insertData=function(e){var t=document.createElement("div");t.classList.add("task"),t.classList.add("".concat(e.color)),t.innerHTML='\n    <div class="task-content-title">\n      <h1 class="task-title">'.concat(e.task,'</h1>\n    </div>\n    <div class="task-date">\n    </div>\n  ');var a=document.createElement("input");a.classList.add("btn-delete"),a.setAttribute("type","button"),a.setAttribute("data-key",e.id),a.setAttribute("value","X"),t.appendChild(a),a.addEventListener("click",(function(e){deleteStorage(e.target.dataset.key,e.path[1])})),fragment.appendChild(t),divTask.appendChild(fragment),countDownDate(e.dateTime)},setStorage=function(e,t){localStorage.setItem(e,t)},getStorage=function(e){var t=JSON.parse(localStorage.getItem(e));insertData(t)},getAllStorage=function(){divTask.textContent="";for(var e=0;e<=localStorage.length-1;e+=1){var t=localStorage.key(e);getStorage(t)}};form.addEventListener("submit",(function(e){e.preventDefault();var t=e.target,a=t.typeTask.value,n=t.radioColor.value,r=t.inputDate.value,s=t.inputTime.value,i="".concat(r," ").concat(s),l=btoa(i+Math.random());if(!validateEmpty(a))return validationMessage("Debe especificar el nombre de la tarea.");if(!validateEmpty(n))return validationMessage("Seleccione un color antes de enviar");if(!validateDate(r,s))return validationMessage("La fecha es invalida, ingrese una fecha superior a la fecha y hora actual.");var o={id:l,task:a,color:n,dateTime:i};return form.reset(),cleanMessage(),setStorage(o.id,JSON.stringify(o)),getAllStorage()})),getAllStorage();var validateEmpty=function(e){return""!==e.trim()},validateDate=function(e,t){if(!validateEmpty(e)||!validateEmpty(t))return!1;var a=new Date,n=a.getFullYear(),r=a.getMonth()+1,s=a.getDate(),i=parseInt(e.split("-")[0],10),l=parseInt(e.split("-")[1],10),o=parseInt(e.split("-")[2],10);if(i<n)return!1;if(i===n&&l<r)return!1;if(i===n&&l===r&&o<s)return!1;var c=a.getHours(),d=a.getMinutes(),u=parseInt(t.split(":")[0],10),m=parseInt(t.split(":")[1],10);if(i===n&&l===r&&o===s){if(u<c)return!1;if(u===c&&m<d)return!1}return!0},cleanMessage=function(){document.querySelector(".error")&&document.querySelector(".error").remove()},validationMessage=function(e){cleanMessage();var t=document.createElement("div");t.classList.add("error"),t.innerHTML='\n    <p class="error-message">'.concat(e,"</p>\n  "),fragment.prepend(t),divTask.prepend(fragment)};